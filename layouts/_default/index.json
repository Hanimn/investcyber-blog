{{- $list := slice -}}
{{- range where .Site.RegularPages "Type" "!=" "page" -}}
  {{- if not .Params.excludeFromSearch -}}
    {{- $tags := .Params.tags | default slice -}}
    {{- $categories := .Params.categories | default slice -}}
    {{- $content := .Content | plainify -}}
    {{- $summary := .Summary | plainify -}}
    {{- $description := .Description | default .Params.description | default "" -}}
    
    {{- $item := dict 
      "title" .Title
      "permalink" .Permalink
      "date" (.Date.Format "2006-01-02")
      "summary" $summary
      "description" $description
      "content" $content
      "tags" $tags
      "categories" $categories
      "section" .Section
      "type" .Type
      "wordCount" .WordCount
      "readingTime" .ReadingTime
    -}}
    
    {{- $list = $list | append $item -}}
  {{- end -}}
{{- end -}}

{{- $list | jsonify }}